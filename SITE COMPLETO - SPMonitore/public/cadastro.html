<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="./function.js"></script>    
    <title>SpMonitore - Login</title>
</head>

<body>

    <div class="section-Login">
        <header class="menu">
            <svg class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="50px " height="50px" viewBox="0 0 50 50">
                    <g id="Grupo_4" data-name="Grupo 4" transform="translate(-47.5 -41.461)">
                        <g id="Componente_3_1" data-name="Componente 3 – 1" transform="translate(47.5 41.461)">
                            <path id="Caminho_354" data-name="Caminho 354"
                                d="M21.558,0A21.813,21.813,0,0,1,43.115,22.06a21.813,21.813,0,0,1-21.558,22.06A21.813,21.813,0,0,1,0,22.06,21.813,21.813,0,0,1,21.558,0Z"
                                transform="translate(3.508 2.621)" fill="#003851" />
                            <path id="Caminho_1" data-name="Caminho 1"
                                d="M15.62,0a15.738,15.738,0,0,1,15.62,15.853A15.738,15.738,0,0,1,15.62,31.707,15.738,15.738,0,0,1,0,15.853,15.738,15.738,0,0,1,15.62,0Z"
                                transform="translate(9.446 9.098)" fill="#d09ee5" />
                            <ellipse id="Elipse_3" data-name="Elipse 3" cx="8.366" cy="8.636" rx="8.366" ry="8.636"
                                transform="translate(16.699 16.047)" fill="#00759c" />
                            <line id="Linha_1" data-name="Linha 1" y2="22.042" transform="translate(25.153)" fill="none"
                                stroke="#fff" stroke-width="2" />
                            <line id="Linha_5" data-name="Linha 5" x2="17.075" y2="17.153"
                                transform="translate(26.716 26.793)" fill="none" stroke="#fff" stroke-width="2" />
                            <line id="Linha_7" data-name="Linha 7" y1="16.454" x2="16.609"
                                transform="translate(27.182 6.52)" fill="none" stroke="#fff" stroke-width="2" />
                            <line id="Linha_8" data-name="Linha 8" y1="16.92" x2="16.842"
                                transform="translate(6.209 27.026)" fill="none" stroke="#fff" stroke-width="2" />
                            <line id="Linha_6" data-name="Linha 6" x2="17.075" y2="17.153"
                                transform="translate(6.209 5.821)" fill="none" stroke="#fff" stroke-width="2" />
                            <line id="Linha_3" data-name="Linha 3" x2="22.353" transform="translate(27.647 25)"
                                fill="none" stroke="#fff" stroke-width="2" />
                            <line id="Linha_4" data-name="Linha 4" x2="22.353" transform="translate(0 25)" fill="none"
                                stroke="#fff" stroke-width="2" />
                            <line id="Linha_2" data-name="Linha 2" y2="22.042" transform="translate(25.153 27.958)"
                                fill="none" stroke="#fff" stroke-width="2" />
                            <ellipse id="Elipse_4" data-name="Elipse 4" cx="3.238" cy="2.969" rx="3.238" ry="2.969"
                                transform="translate(22.093 21.983)" fill="#01141a" />
                        </g>
                    </g>
                </svg>
            </svg>
            <nav class="opcoes">
                <a href="index.html">Home</a>
                <a href="#SectionC">Sobre</a>
                <a href="#SectionF">Simulador</a>
                <a href="#Contato">Contato</a>
                <a href="cadastro.html"><button class="btn_entrar">Cadastro</button></a>
                <a href="login.html"><button class="btn_login">Login</button></a>
            </nav>
        </header>

        <section class="container-pagina">
            <div class="container-cad">
                <div class="img-login">
                    <h3 id="title-login">Crie uma conta</h3>
                    <span id="txt-login">Abra um novo leque de possibilidades de decisões e oportunidades para seu 
                        negócio! Monitore, adapte e evolua conosco.
                    </span>
                    <div class="img-svg">
                        <img src="imagens/cadastro-img.svg" alt="">
                    </div>
                </div>
                <div class="forms-cadastro">
                    <svg class="logo2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="50px " height="50px" viewBox="0 0 50 50">
                            <g id="Grupo_4" data-name="Grupo 4" transform="translate(-47.5 -41.461)">
                                <g id="Componente_3_1" data-name="Componente 3 – 1" transform="translate(47.5 41.461)">
                                    <path id="Caminho_354" data-name="Caminho 354"
                                        d="M21.558,0A21.813,21.813,0,0,1,43.115,22.06a21.813,21.813,0,0,1-21.558,22.06A21.813,21.813,0,0,1,0,22.06,21.813,21.813,0,0,1,21.558,0Z"
                                        transform="translate(3.508 2.621)" fill="#003851" />
                                    <path id="Caminho_1" data-name="Caminho 1"
                                        d="M15.62,0a15.738,15.738,0,0,1,15.62,15.853A15.738,15.738,0,0,1,15.62,31.707,15.738,15.738,0,0,1,0,15.853,15.738,15.738,0,0,1,15.62,0Z"
                                        transform="translate(9.446 9.098)" fill="#d09ee5" />
                                    <ellipse id="Elipse_3" data-name="Elipse 3" cx="8.366" cy="8.636" rx="8.366"
                                        ry="8.636" transform="translate(16.699 16.047)" fill="#00759c" />
                                    <line id="Linha_1" data-name="Linha 1" y2="22.042" transform="translate(25.153)"
                                        fill="none" stroke="#fff" stroke-width="2" />
                                    <line id="Linha_5" data-name="Linha 5" x2="17.075" y2="17.153"
                                        transform="translate(26.716 26.793)" fill="none" stroke="#fff"
                                        stroke-width="2" />
                                    <line id="Linha_7" data-name="Linha 7" y1="16.454" x2="16.609"
                                        transform="translate(27.182 6.52)" fill="none" stroke="#fff" stroke-width="2" />
                                    <line id="Linha_8" data-name="Linha 8" y1="16.92" x2="16.842"
                                        transform="translate(6.209 27.026)" fill="none" stroke="#fff"
                                        stroke-width="2" />
                                    <line id="Linha_6" data-name="Linha 6" x2="17.075" y2="17.153"
                                        transform="translate(6.209 5.821)" fill="none" stroke="#fff" stroke-width="2" />
                                    <line id="Linha_3" data-name="Linha 3" x2="22.353" transform="translate(27.647 25)"
                                        fill="none" stroke="#fff" stroke-width="2" />
                                    <line id="Linha_4" data-name="Linha 4" x2="22.353" transform="translate(0 25)"
                                        fill="none" stroke="#fff" stroke-width="2" />
                                    <line id="Linha_2" data-name="Linha 2" y2="22.042"
                                        transform="translate(25.153 27.958)" fill="none" stroke="#fff"
                                        stroke-width="2" />
                                    <ellipse id="Elipse_4" data-name="Elipse 4" cx="3.238" cy="2.969" rx="3.238"
                                        ry="2.969" transform="translate(22.093 21.983)" fill="#01141a" />
                                </g>
                            </g>
                        </svg>
                    </svg><br>
                    <span class="txt-form-cad">Nome:</span><br>

                    <input class="in-form-cad" placeholder="Nome de usuário" type="text required" id="nome_cad"><br>
                    
                    <span class="txt-form-cad">Email</span><br>

                    <input class="in-form-cad" placeholder="Exemplo@gmail.com" id="email_cad" type="email"><br>

                    <span class="txt-form-cad">Telefone</span><br>

                    <input class="in-form-cad" placeholder="(xx) xxxxx-xxxx" type="text" id="num_cad"><br>

                    <span class="txt-form-cad">Crie uma senha</span><span id="txt-aviso">Minimo de 8 caracteres</span><br>

                    <input class="in-form-cad" placeholder="Senha" type="password" id="senha_cad"><br>

                    <span class="txt-form-cad">Confirme sua senha</span><br>

                    <input class="in-form-cad" placeholder="Confirme sua senha" type="password" id="conf_senha"><br>

                    <input type="checkbox" id="box-termos-cad"><span id="termos">Li e aceito os </span><a id="link_cad">Termos e condições</a><br>

                    <div class="container-btn">
                    <button id="btn-login"  onclick="cadastro()" >Entrar</button>
                </div>    
                </div>
                </div>
            </div>
        </section>
    </div>

</body>
</html>
    <!-- inserir function para validação dos dados inseridos nos inputs
com alertas  -->

<script>
    function cadastrar() {
        aguardar();

        //Recupere o valor da nova input pelo nome do id
        // Agora vá para o método fetch logo abaixo
        var nomeVar = nome_input.value;
        var emailVar = email_input.value;
        var telefoneVar = num_cad.value;
        var senhaVar = senha_input.value;
        var confirmacaoSenhaVar = confirmacao_senha_input.value;

        if (nomeVar == "" || emailVar == "" ||telefonevar == "" || senhaVar == "" || confirmacaoSenhaVar == "") {
            cardErro.style.display = "block"
            mensagem_erro.innerHTML = "(Mensagem de erro para todos os campos em branco)";

            finalizarAguardar();
            return false;
        }
        else {
            setInterval(sumirMensagem, 5000)
        }

        // Enviando o valor da nova input
        fetch("/usuarios/cadastrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                nomeServer: nomeVar,
                emailServer: emailVar,
                senhaServer: senhaVar
            })
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                cardErro.style.display = "block";

                mensagem_erro.innerHTML = "Cadastro realizado com sucesso! Redirecionando para tela de Login...";

                setTimeout(() => {
                    window.location = "login.html";
                }, "2000")
                
                limparFormulario();
                finalizarAguardar();
            } else {
                throw ("Houve um erro ao tentar realizar o cadastro!");
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            finalizarAguardar();
        });

        return false;
    }

    function sumirMensagem() {
        cardErro.style.display = "none"
    }

</script>